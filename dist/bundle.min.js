"use strict";
/*!
 * Express Rest Response (https://github.com/dimtrovich/express-responder)
 * Copyright 2021 Dimtrov Lab's | Dimitri Sitchet Tomkeu
 * Licensed under MIT (https://opensource.org/licences/mit)
 */var e=498,r=200,n=201,s=204,o=400,t=401,d=403,l=404,u=405,c=406,a=409,i=410,p=413,f=415,_=429,g=500,h=501;
/*!
 * Express Rest Response (https://github.com/dimtrovich/express-responder)
 * Copyright 2021 Dimtrov Lab's | Dimitri Sitchet Tomkeu
 * Licensed under MIT (https://opensource.org/licences/mit)
 */function m(e){var r,n,s,o=[undefined,null,!1,0,"","0"];for(n=0,s=o.length;n<s;n++)if(e===o[n])return!0;if("object"==typeof e){for(r in e)return!1;return!0}return!(!b(e)||e.length)}function b(e){return!(!e||"object"!=typeof e)&&function(e){if(!e||"object"!=typeof e||"number"!=typeof e.length)return!1;var r=e.length;return e[e.length]="bogus",r!==e.length?(e.length-=1,!0):(delete e[e.length],!1)}(e)}function F(e){return"[object Array]"!==Object.prototype.toString.call(e)&&(null!==e&&("object"==typeof e||e instanceof Object))}function y(e){return(e+="").charAt(0).toUpperCase()+e.substr(1)}module.exports=function(v,S){const N=["badRequest","conflict","created","deleted","forbidden","gone","internalError","invalidToken","methodNotAllowed","noContent","notAcceptable","notFound","notImplemented","ok","tooManyRequests","unauthorized","updated"];return v=m(v)||!F(v)?{}:v,S=m(S)||!F(S)?{}:S,(q,A,j)=>{const k=function(y,v,S){const N=y,q={created:n,deleted:r,updated:r,no_content:s,invalid_request:o,unsupported_response_type:o,invalid_scope:o,temporarily_unavailable:o,invalid_grant:o,invalid_credentials:o,invalid_refresh:o,no_data:o,invalid_data:o,access_denied:t,unauthorized:t,invalid_client:t,forbidden:d,resource_not_found:l,not_acceptable:c,resource_exists:a,conflict:a,resource_gone:i,payload_too_large:p,unsupported_media_type:f,too_many_requests:_,server_error:g,unsupported_grant_type:h,not_implemented:h,...S},A={strict:!0,field:{success:"success",message:"message",code:"code",errors:"errors",result:"result"},...v},j=(e,r=null,n=[])=>((b(e)||F(e))&&(m(n)&&(n=e),e=null),b(r)&&(m(n)&&(n=r),r=null),{message:e,code:r,errors:n});return{respondFail(e="An error has occurred",n=g,s,o=[]){e=e||"Une erreur s'est produite",s=m(s)?n:s;const t={};return t[A.field?.message||"message"]=e,m(A.field?.success)||(t[A.field?.success]=!1),m(A.field?.code)||(t[A.field?.code]=s),m(o)||(t[A.field?.errors||"errors"]=o),!0!==A.strict&&(n=r),this.respond(t,n)},respondSuccess(e="Result",n=null,s=r){e=e||"RÃ©sultat",s=m(s)?r:s;const o={};return o[A.field?.message||"message"]=e,m(A.field?.success)||(o[A.field?.success]=!0),o[A.field?.result||"result"]=n,this.respond(o,s)},respond:(e,n=r)=>(m(e)&&null===n&&(n=l),e=JSON.parse(JSON.stringify(e)),N.status(n||200).json(e)),respondBadRequest(e,r=null,n=[]){const s=j(e,r,n);return this.respondFail(s.message||"Bad request",q.invalid_request||o,s.code,s.errors)},respondConflict(e,r=null,n=[]){const s=j(e,r,n);return this.respondFail(s.message||"Conflict",q.conflict||a,s.code,s.errors)},respondCreated(e,r=null){const s=j(e,null,r);return this.respondSuccess(s.message||"Created",s.errors,q.created||n)},respondDeleted(e,n=null){const s=j(e,null,n);return this.respondSuccess(s.message||"Deleted",s.errors,q.deleted||r)},respondForbidden(e,r=null,n=[]){const s=j(e,r,n);return this.respondFail(s.message||"Forbidden",q.forbidden||d,s.code,s.errors)},respondGone(e,r=null,n=[]){const s=j(e,r,n);return this.respondFail(s.message||"Gone",q.resource_gone||i,s.code,s.errors)},respondInternalError(e,r=null,n=[]){const s=j(e,r,n);return this.respondFail(s.message||"Internal Server Error",q.server_error||g,s.code,s.errors)},respondInvalidToken(r,n=null){const s=j(r,n,[]);return this.respondFail(s.message||"Invalid Token",q.invalid_token||e,s.code,s.errors)},respondMethodNotAllowed(e,r=null,n=[]){const s=j(e,r,n);return this.respondFail(s.message||"Method Not Allowed",q.not_allowed||u,s.code,s.errors)},respondNoContent(e){return this.respondSuccess(e||"No Content",null,q.no_content||s)},respondNotAcceptable(e,r=null,n=[]){const s=j(e,r,n);return this.respondFail(s.message||"Not Acceptable",q.not_acceptable||c,s.code,s.errors)},respondNotFound(e,r=null,n=[]){const s=j(e,r,n);return this.respondFail(s.message||"Not Found",q.resource_not_found||l,s.code,s.errors)},respondNotImplemented(e,r=null){const n=j(e,r,[]);return this.respondFail(n.message||"Not Implemented",q.resource_not_implemented||h,n.code,n.errors)},respondOk(e,n=null){const s=j(e,null,n);return this.respondSuccess(s.message||"Ok",s.errors,q.ok||r)},respondTooManyRequests(e,r=null,n=[]){const s=j(e,r,n);return this.respondFail(s.message||"Too Many Requests",q.too_many_requests||_,s.code,s.errors)},respondUnauthorized(e,r=null,n=[]){const s=j(e,r,n);return this.respondFail(s.message||"Unauthorized",q.unauthorized||t,s.code,s.errors)},respondUpdated(e,n=null){const s=j(e,null,n);return this.respondSuccess(s.message||"Updated",s.errors,q.updated||r)}}}(A,v,S);A.respondSuccess=k.respondSuccess,A.respondFail=k.respondFail,A.respond=k.respond;for(const e of N)A[`respond${y(e)}`]=k[`respond${y(e)}`];if(v.allowShortSyntax&&!0===v.allowShortSyntax){for(const e of N)A[`${e}`]=k[`respond${y(e)}`];A.fail=k.respondFail,A.success=k.respondSuccess}j()}};
